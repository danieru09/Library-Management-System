package Admin;

import java.awt.EventQueue;
import java.awt.Color;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.JOptionPane;

import java.io.FileWriter;
import java.io.IOException;

public class AddUser extends JFrame {

    private JTextField textFieldUserName;
    private JTextField textFieldUserID;
    private JTextField textFieldEmail;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    AddUser window = new AddUser();
                    window.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public AddUser() {
        initialize();
    }

    private void initialize() {
        setBounds(100, 100, 1188, 617);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        getContentPane().setLayout(null);

        JPanel panel = new JPanel();
        panel.setBounds(0, 0, 1172, 578);
        panel.setBackground(new Color(102, 102, 205));
        getContentPane().add(panel);
        panel.setLayout(null);

        JLabel lblNewLabel_4 = new JLabel("");
        lblNewLabel_4.setBounds(1103, 29, 46, 30);
        lblNewLabel_4.setIcon(new ImageIcon("C:\\Users\\User\\Downloads\\Person.png"));
        panel.add(lblNewLabel_4);

        JPanel panel_1 = new JPanel();
        panel_1.setForeground(new Color(255, 255, 255));
        panel_1.setBounds(121, 74, 306, 430);
        panel.add(panel_1);
        panel_1.setLayout(null);

        JLabel lblNewLabel = new JLabel("Welcome to Mind Sphere");
        lblNewLabel.setFont(new Font("Tahoma", Font.BOLD, 20));
        lblNewLabel.setBounds(30, 10, 258, 117);
        panel_1.add(lblNewLabel);

        JButton btnAddUser = new JButton("Add User");
        btnAddUser.setBounds(135, 283, 95, 21);
        panel_1.add(btnAddUser);

        JButton btnBack = new JButton("Back");
        btnBack.setBounds(30, 362, 85, 21);
        panel_1.add(btnBack);

        JLabel lblUserName = new JLabel("UserName:");
        lblUserName.setFont(new Font("Tahoma", Font.BOLD, 13));
        lblUserName.setBounds(30, 129, 75, 25);
        panel_1.add(lblUserName);

        textFieldUserName = new JTextField();
        textFieldUserName.setColumns(10);
        textFieldUserName.setBackground(new Color(255, 255, 128));
        textFieldUserName.setBounds(115, 132, 150, 20);
        panel_1.add(textFieldUserName);

        JLabel lblUserID = new JLabel("UserID:");
        lblUserID.setFont(new Font("Tahoma", Font.BOLD, 13));
        lblUserID.setBounds(30, 178, 75, 25);
        panel_1.add(lblUserID);

        textFieldUserID = new JTextField();
        textFieldUserID.setColumns(10);
        textFieldUserID.setBackground(new Color(255, 255, 128));
        textFieldUserID.setBounds(115, 181, 150, 20);
        panel_1.add(textFieldUserID);

        JLabel lblEmail = new JLabel("Email:");
        lblEmail.setFont(new Font("Tahoma", Font.BOLD, 13));
        lblEmail.setBounds(30, 224, 75, 25);
        panel_1.add(lblEmail);

        textFieldEmail = new JTextField();
        textFieldEmail.setColumns(10);
        textFieldEmail.setBackground(new Color(255, 255, 128));
        textFieldEmail.setBounds(115, 227, 150, 20);
        panel_1.add(textFieldEmail);

        btnAddUser.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                String userName = textFieldUserName.getText();
                String userID = textFieldUserID.getText();
                String email = textFieldEmail.getText();

                if (userName.isEmpty() || userID.isEmpty() || email.isEmpty()) {
                    JOptionPane.showMessageDialog(AddUser.this, "All fields are required!", "Error", JOptionPane.ERROR_MESSAGE);
                } else {
                    // Save user data (for now, we'll write to a file as an example)
                    saveUserData(userName, userID, email);
                    JOptionPane.showMessageDialog(AddUser.this,
                            "User added successfully!\n\nUserName: " + userName +
                            "\nUserID: " + userID + "\nEmail: " + email,
                            "Success", JOptionPane.INFORMATION_MESSAGE);

                    textFieldUserName.setText("");
                    textFieldUserID.setText("");
                    textFieldEmail.setText("");
                }
            }	
        });
        
        btnBack.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // Display a confirmation dialog to the user
                JOptionPane.showMessageDialog(AddUser.this, "Returning to Admin Dashboard...", 
                                              "Information", JOptionPane.INFORMATION_MESSAGE);

                // Dispose of the current frame
                dispose();

                // Navigate back to AdminDashboard
                AdminDashboard adminDashboard = new AdminDashboard();
                adminDashboard.setVisible(true);
            }
        });




        JLabel lblNewLabel_2 = new JLabel("ADD");
        lblNewLabel_2.setForeground(new Color(255, 128, 0));
        lblNewLabel_2.setFont(new Font("Tahoma", Font.BOLD, 50));
        lblNewLabel_2.setBounds(865, 186, 250, 51);
        panel.add(lblNewLabel_2);

        JLabel lblNewLabel_2_1 = new JLabel("USER");
        lblNewLabel_2_1.setFont(new Font("Tahoma", Font.BOLD, 50));
        lblNewLabel_2_1.setForeground(new Color(128, 128, 255));
        lblNewLabel_2_1.setBounds(889, 247, 250, 51);
        panel.add(lblNewLabel_2_1);

        JLabel lblNewLabel_5 = new JLabel("libraryniMingmong");
        lblNewLabel_5.setFont(new Font("Tahoma", Font.BOLD, 65));
        lblNewLabel_5.setBounds(482, 432, 657, 87);
        panel.add(lblNewLabel_5);

        JLabel lblNewLabel_3 = new JLabel("");
        lblNewLabel_3.setBounds(52, 39, 1063, 498);
        panel.add(lblNewLabel_3);
        lblNewLabel_3.setIcon(new ImageIcon("C:\\Users\\USER\\Downloads\\bg2.png"));
    }

    private void saveUserData(String userName, String userID, String email) {
        try (FileWriter writer = new FileWriter("users.txt", true)) {
            writer.write("UserName: " + userName + "\nUserID: " + userID + "\nEmail: " + email + "\n\n");
        } catch (IOException e) {
            JOptionPane.showMessageDialog(this, "Error saving user data", "Error", JOptionPane.ERROR_MESSAGE);
        }
    }
}
